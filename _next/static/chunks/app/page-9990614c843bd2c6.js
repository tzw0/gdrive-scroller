(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1134:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var l=t(5155),s=t(2115),a=t(9971),o=t(1857);function i(e){return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2 p-2 max-w-md mx-auto arimo-regular color-white",children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Upload Images here!"}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full",children:(0,l.jsx)(o.h,{value:e.url,style:{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"},fgColor:e.fgColor,bgColor:e.bgColor,className:"rounded-lg w-full h-full",level:"H",includeMargin:!0,marginSize:2})}),(0,l.jsx)("div",{className:"text-md text-white-600",children:"Download the 'google drive' app for best experience and allow uploads with mobile data if required!"})]})}var n=t(802);let c=e=>{let{scroll:r=!1,children:t,speed:a,resetFunc:o}=e,i=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{if(!i.current||!c.current)return;let e=i.current,t=c.current,l=()=>{let s=e.offsetHeight,i=t.offsetHeight;i>s+300&&r&&(console.log(">>",i,s),d.current=n.os.to(t,{y:-(i-s),duration:i/(50*a),ease:"none",onComplete:()=>{n.os.set(t,{y:0}),l(),console.log("reset"),o()}}))};l();let s=()=>{d.current&&!u.current&&(d.current.pause(),u.current=!0)},h=()=>{d.current&&(u.current?d.current.play():d.current.pause(),u.current=!u.current)},m=()=>{d.current&&u.current&&(d.current.play(),u.current=!1)};return e.addEventListener("click",h),()=>{d.current&&d.current.kill(),e.removeEventListener("mouseenter",s),e.removeEventListener("mouseleave",m),e.removeEventListener("focusin",s),e.removeEventListener("focusout",m),e.removeEventListener("focuclicksout",h)}},[t,a,r]),(0,l.jsx)("div",{ref:i,className:"h-full relative overflow-hidden",tabIndex:0,children:(0,l.jsx)("div",{ref:c,children:t})})},d="https://lh3.googleusercontent.com/d/",u="1tfvLf_6U7cdLoCQLXFRt3CDA7FLpYKgG";function h(){return(0,l.jsx)("img",{src:d+"1yjVW5RelHzyqyJcYyb9J7YPuEdM5X3GV",alt:"test google drive image",width:1300,height:0,className:"w-full h-auto",referrerPolicy:"no-referrer"})}function m(){return(0,l.jsx)("img",{src:d+"1qOO9edsViKehiWKpkHNYEYD7yHnzPDQ4",alt:"test google drive image",width:1300,height:0,className:"w-full h-auto",referrerPolicy:"no-referrer"})}function f(e){return'https://www.googleapis.com/drive/v3/files/?q="'+e+'"+in+parents&fields=files(id,name,mimeType,createdTime,size,imageMediaMetadata,videoMediaMetadata)'}let x=e=>"https://www.googleapis.com/drive/v3/files/"+e+"?fields=name,id,mimeType,owners(emailAddress,displayName)";function g(e){let[r,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[i,n]=(0,s.useState)({}),c=f(e.scrollFolderID),u={"Content-Type":"application/json","X-Goog-Api-Key":e.apiKey};if((0,s.useEffect)(()=>{e.picsLoadedSetter(!1),(async()=>{try{let l=await fetch(f("1iObk9qywKpgnCf4RyCBuA3EUaFCFOqbM"),{method:"GET",headers:u});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let s=await l.json();n(s);let a=await fetch(c,{method:"GET",headers:u});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));var r=await a.json();r.files=r.files.filter(e=>!e.mimeType.includes("image")||Number(e.size)/1024/1024>30||null!==e.imageMediaMetadata&&e.imageMediaMetadata.height/e.imageMediaMetadata.width<=21/8&&e.imageMediaMetadata.width/e.imageMediaMetadata.height<=21/8),r.files=function(e){for(let r=e.length-1;r>0;r--){let t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e}(r.files),await Promise.all(r.files.map(async(e,t)=>{let l=await fetch(x(e.id),{method:"GET",headers:u});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));var s,a,o=await l.json();o.owners.length>0?(r.files[t].sharer=o.owners[0].displayName,r.files[t].sharer_pfp=(s=0,a=100,s=Math.ceil(s),Math.floor(Math.random()*((a=Math.floor(a))-s+1))+s)):(r.files[t].sharer="???",r.files[t].sharer_pfp=0)})),t(r),r.files.length>5&&e.picsLoadedSetter(!0),console.log("refreshing data:",r)}catch(e){e instanceof Error?(e.message="failed to refresh: "+e.message,o(e)):o(Error("An unknown error occurred"))}})()},[]),!r&&!a||null===r)return(0,l.jsx)("div",{className:"w-full flex justify-center h-[70%]",children:(0,l.jsxs)("div",{className:"text-2xl color-black items-center justify-items-center text-align-center  min-h-screen mt-5 p-5 overflow-hidden font-vt323 w-[80%]",children:[(0,l.jsx)("span",{className:"vt323-regular text-8xl",children:"REFRESHING..."}),(0,l.jsx)("img",{src:d+"1SbonKV7sJmRVuHGSGveYDc1ShT5sNMuf",alt:"",width:0,height:600,referrerPolicy:"no-referrer",className:"w-auto h-[30%] rounded-lg mt-10"})]})});if(a)return(0,l.jsxs)("div",{children:["Fail to load album, error: ",a.message," "]});function h(e){let{props:t}=e;return null===r?(0,l.jsx)("span",{}):r.files.map((e,r)=>{if(t(r))return(0,l.jsx)("span",{},e.id);let s=i.files;return(0,l.jsx)(p,{id:e.id,timestamp:e.createdTime,sharer:e.sharer,pfpData:i,sharer_pfp:d+s[e.sharer_pfp%i.files.length].id},e.id)})}return(0,l.jsx)("div",{className:"bg-[#F4AAFF] p-[2%]",children:(0,l.jsxs)("div",{className:"flex flex-row gap-4 ",children:[(0,l.jsx)("div",{className:"w-1/2 min-w-[200px] aspect-auto",children:(0,l.jsx)(h,{props:e=>e%2==0})}),(0,l.jsx)("div",{className:"w-1/2 min-w-[200px] aspect-auto",children:(0,l.jsx)(h,{props:e=>e%2==1})})]})})}function p(e){let[r,t]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"relative m-2 p-2 bg-[#E4DDB6] rounded-md",children:[(0,l.jsx)("img",{src:d+e.id,alt:"",width:700,onLoad:()=>t(!0),className:"w-full h-auto rounded-lg",referrerPolicy:"no-referrer"},e.id),(0,l.jsxs)("div",{className:"flex items-center space-x-4 w-full mt-2",children:[(0,l.jsx)("div",{className:"w-[10%] flex justify-start",children:(0,l.jsx)("div",{className:"w-full h-auto rounded-full object-cover bg-white p-1 border border-black border-2",children:(0,l.jsx)("img",{className:"w-full h-auto rounded-full object-cover",src:e.sharer_pfp,alt:"",width:50,height:50,referrerPolicy:"no-referrer"})})}),(0,l.jsx)("h3",{className:"color-black text-md flex-grow overflow-x-hidden lower-case",children:e.sharer.replaceAll(" ","_")}),(0,l.jsx)("div",{className:"w-[20%] flex justify-end",children:(0,l.jsx)("img",{src:d+"1QfW0zFtwz5poV3X_nBq9zYdKwZHpKoWm",width:135,height:27,className:"w-full h-auto",alt:"",referrerPolicy:"no-referrer"})})]})]})}function v(e){let[r,t]=(0,s.useState)(""),[o,i]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=(0,a.getCookie)("gdrivefolderlink");e&&t(e.toString());let r=(0,a.getCookie)("gdriveapikey");r&&i(r.toString());let l=(0,a.getCookie)("gdrivealbumname");l&&c(l.toString())},[]);let f=async t=>{t.preventDefault();let l=r.replace(RegExp("^https://drive.google.com/drive/folders/"),"").replaceAll("?usp=sharing","");u("");let s=await fetch(x(l),{method:"GET",headers:{"Content-Type":"application/json","X-Goog-Api-Key":o}});if(!s.ok)throw m("failed to get gdrive folder: ".concat(s.status,"\n\n")+JSON.stringify(s.json())),Error("HTTP error! status: ".concat(s.status));if(200!=s.status)return void m("failed to validate gdrive folder: "+JSON.stringify(s.json()));let i=await s.json();if("application/vnd.google-apps.folder"!==i.mimeType.toString())return void m("Google Drive ID is not a valid folder: gdrive object does not have mimeType:'application/vnd.google-apps.folder'");e.setFolderName(i.name),(0,a.setCookie)("gdrivefolderlink",l,{maxAge:31536e3,path:"/",secure:!0,sameSite:"strict"}),(0,a.setCookie)("gdriveapikey",o,{maxAge:31536e3,path:"/",secure:!0,sameSite:"strict"}),(0,a.setCookie)("gdrivealbumname",n,{maxAge:31536e3,path:"/",secure:!0,sameSite:"strict"}),e.setFolderID(l),e.setAlbumName(n),e.setAPIKey(o)};return(0,l.jsxs)("div",{className:"winky-rough-regular",children:[(0,l.jsxs)("div",{className:"max-w-md w-full space-y-8 ",children:[(0,l.jsx)("div",{children:(0,l.jsx)("h2",{className:"vt323-regular mt-6 text-center text-4xl font-extrabold",children:"Enter Google-Drive Folder Details"})}),d&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,l.jsx)("span",{className:"block sm:inline",children:d})}),(0,l.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:f,children:[(0,l.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"FolderID-address",name:"FolderID",type:"FolderID",autoComplete:"FolderID",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white-500 placeholder-[#DEDEDE]-500 text-white-900 rounded-t-md focus:outline-none focus:ring-pink-500 focus:border-pink-700 focus:z-10 1xl:text-2xl",placeholder:"Google Drive Shared Folder Link",value:r,onChange:e=>t(e.target.value)})}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"apiKey",name:"apiKey",type:"password",autoComplete:"current-apiKey",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 mt-3 border border-white-500 placeholder-[#DEDEDE]-500 text-white-900 rounded-b-md focus:outline-none focus:ring-pink-500 focus:border-pink-700 focus:z-10 1xl:text-2xl",placeholder:"Google API Key",value:o,onChange:e=>{i(e.target.value)}})}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{id:"Album-Name",name:"AlbumName",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white-500 placeholder-[#DEDEDE]-500 text-white-900 rounded-t-md focus:outline-none focus:ring-pink-500 focus:border-pink-700 focus:z-10 1xl:text-2xl mt-3",placeholder:"album name (40 char max)",value:n,onChange:e=>c(e.target.value.length<=40?e.target.value:e.target.value.slice(0,39))})})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-black bg-[#CAF1FF] hover:bg-white-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Let's Go!"})})]}),h?(0,l.jsx)("div",{className:"max-w-md bg-[#dedede] p-2 rounded-md",children:(0,l.jsx)("code",{className:"text-red-500",children:h})}):(0,l.jsx)("span",{})]}),(0,l.jsxs)("div",{className:"max-w-md text-xs",children:[(0,l.jsx)("h3",{className:"text-lg text-gray-300 font-semibold mt-1",id:"to-setup-a-suitable-google-drive-shared-folder-link-",children:(0,l.jsx)("code",{children:"Google Drive Shared Folder Link"})}),(0,l.jsxs)("ol",{className:"text-gray-400",children:[(0,l.jsx)("li",{children:"- Select a suitable google drive folder. "}),(0,l.jsx)("li",{children:"- Ensure that it is shared to anyone with link"}),(0,l.jsx)("li",{children:'- Navigate to "Shared or Managed Access" > "Copy Link"'})]}),(0,l.jsx)("h3",{className:"text-lg text-gray-300 font-semibold mt-2",id:"to-get-the-google-api-key-",children:(0,l.jsx)("code",{children:"Google API Key"})}),(0,l.jsxs)("ol",{className:"text-gray-400",children:[(0,l.jsxs)("li",{children:["- Create a new Project or select an existing one in Google Cloud Console: ",(0,l.jsx)("a",{href:"https://console.cloud.google.com/",children:"https://console.cloud.google.com/"})," "]}),(0,l.jsx)("li",{children:'- Navigate to "APIs & Services" > "Library"'}),(0,l.jsx)("li",{children:'- Search for "Google Drive API"'}),(0,l.jsx)("li",{children:'- Click "Enable"'}),(0,l.jsxs)("li",{children:['- Go to "APIs & Services" > "Credentials": ',(0,l.jsx)("a",{href:"https://console.cloud.google.com/apis/credentials",children:"https://console.cloud.google.com/apis/credentials"})," "]}),(0,l.jsx)("li",{children:"- Create a new API Key to access google drive apis."})]})]})]})}function j(e){return(0,l.jsxs)("div",{className:"w-[33%] flex flex-col justify-center item-center cursor-pointer m-3 hover:bg-blue-900 active:bg-gray-500",onClick:()=>e.onClick(),children:[(0,l.jsx)("img",{className:e.flipIcon?"w-full h-auto object-cover scale-x-[-1]":"w-full h-auto object-cover",src:e.src,alt:"",width:150,height:150,referrerPolicy:"no-referrer"}),(0,l.jsx)("span",{className:"bg-[#000000]/50 rounded-lg text-sm w-full text-center mt-1 vt323-regular",children:e.text})]})}function w(){let[e,r]=(0,s.useState)(""),[t,a]=(0,s.useState)(""),[o,n]=(0,s.useState)(""),[f,x]=(0,s.useState)(""),[p,w]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),[N,k]=(0,s.useState)(2),E=(0,s.useRef)(null);return(0,l.jsx)("div",{className:"items-center h-[95vh] justify-items-center min-h-screen pt-[2%] gap-12 sm:px-5 overflow-hidden",children:""==f||""==e?(0,l.jsx)(v,{setAPIKey:e=>x(e),setFolderID:e=>r(e),setFolderName:e=>a(e),setAlbumName:e=>n(e)}):(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsxs)("div",{className:"h-[90vh] w-[15vw] flex flex-col my-2",children:[(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsx)(j,{text:"EJECT",flipIcon:!1,src:d+"1WnRBfqTc2L3EbWyrgPoYqeoDo6I65AJ3",onClick:()=>{x(""),r(""),y(!1)}}),(0,l.jsx)(j,{text:"RELOAD",flipIcon:!1,src:d+"1m2bNzbiPgTaRFZnBnmPK10eVyKfu-e4b",onClick:()=>{w(e=>!e)}})]}),(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsx)(j,{text:"SLOWER",flipIcon:!0,src:d+u,onClick:()=>{k(e=>e<=.5?.5:e/2),console.log("scroll speed reduce:",N)}}),(0,l.jsx)(j,{text:"FASTER",flipIcon:!1,src:d+u,onClick:()=>{k(e=>e>=32?32:2*e),console.log("scroll speed increase:",N)}})]}),(0,l.jsx)("div",{className:"flex-grow"}),(0,l.jsx)("div",{className:"w-full relative",children:(0,l.jsx)(i,{url:"https://drive.google.com/drive/folders/".concat(e,"?usp=sharing"),name:t,fgColor:"#284a42",bgColor:"#FFFFFF"})})]}),(0,l.jsxs)("div",{className:"h-[92vh] w-[80vw] flex flex-col overflow-hidden cursor-pointer",onClick:()=>{y(e=>!e)},children:[(0,l.jsxs)("div",{className:"relative p-[-1] w-full",children:[(0,l.jsx)(h,{}),(0,l.jsx)("div",{style:{fontSize:"2.2vw"},className:"vt323-regular text-gray-700 absolute top-[3vw] left-[10.5vw] z-10",children:o})]}),(0,l.jsx)("div",{className:"flex-1 scrollbar-track-custom overflow-y-auto mx-0.5 px-0.55 bg-[#F4C8FF] scroll-smooth [&::-webkit-scrollbar-thumb]:border [&::-webkit-scrollbar-thumb]:border-white",ref:E,children:(0,l.jsx)(c,{scroll:b,speed:N,resetFunc:()=>w(e=>!e),children:(0,l.jsx)(g,{picsLoadedSetter:e=>{y(e)},apiKey:f,scrollFolderID:e})})},p?"refresh fail":"refresh mech"),(0,l.jsx)("div",{className:"p-[-1]",children:(0,l.jsx)(m,{})})]})]})})}},3984:(e,r,t)=>{Promise.resolve().then(t.bind(t,1134))}},e=>{var r=r=>e(e.s=r);e.O(0,[592,962,441,684,358],()=>r(3984)),_N_E=e.O()}]);