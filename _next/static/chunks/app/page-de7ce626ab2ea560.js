(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3984:(e,t,r)=>{Promise.resolve().then(r.bind(r,7003))},7003:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var l=r(5155),s=r(6766),a=r(2115),o=r(9971),i=r(1857);function n(e){return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 p-8 max-w-md mx-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:e.name}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,l.jsx)(i.h,{value:e.url,size:200,fgColor:e.fgColor,bgColor:e.bgColor,className:"rounded-lg",level:"H",includeMargin:!0,marginSize:2})}),(0,l.jsx)("div",{className:"text-sm text-white-600",children:"Share Your Memories here!"})]})}let d="https://drive.usercontent.google.com/download?id=",c="https://drive.usercontent.google.com/download?id=",u="1cdv8snvIogtCHBKlq2W1K3dYkK7SZUX1",h="13a7YHqESADlYcU5fVwW6Uka4uEgUNu75";function m(){return(0,l.jsx)(s.default,{src:d+"1z7-ICzTecSQ4Z4wbZsl8Rb38FCFSWrNy",alt:"test google drive image",width:1300,height:0,className:"w-full h-auto"})}function f(){return(0,l.jsx)(s.default,{src:d+"1qOO9edsViKehiWKpkHNYEYD7yHnzPDQ4",alt:"test google drive image",width:1300,height:0,className:"w-full h-auto"})}function p(e){return'https://www.googleapis.com/drive/v3/files/?q="'+e+'"+in+parents&fields=files(id,name,mimeType,createdTime,size,imageMediaMetadata,videoMediaMetadata)'}let x=e=>"https://www.googleapis.com/drive/v3/files/"+e+"?fields=name,id,mimeType,owners(emailAddress,displayName)";function g(e){let[t,r]=(0,a.useState)(null),[s,o]=(0,a.useState)(null),[i,n]=(0,a.useState)({}),d=p(e.scrollFolderID),c={"Content-Type":"application/json","X-Goog-Api-Key":e.apiKey};if((0,a.useEffect)(()=>{(async()=>{e.picsLoadedSetter(!1);try{let l=await fetch(p("1iObk9qywKpgnCf4RyCBuA3EUaFCFOqbM"),{method:"GET",headers:c});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));let s=await l.json();n(s);let a=await fetch(d,{method:"GET",headers:c});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));var t=await a.json();t.files=function(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}(t.files),await Promise.all(t.files.map(async(e,r)=>{let l=await fetch(x(e.id),{method:"GET",headers:c});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));var s=await l.json();s.owners.length>0?t.files[r].sharer=s.owners[0].displayName:t.files[r].sharer="???"})),r(t),t.files.length>3&&e.picsLoadedSetter(!0),console.log("refreshing data:",t)}catch(e){e instanceof Error?o(e):o(Error("An unknown error occurred"))}})()},[]),!t&&!s||null===t)return(0,l.jsx)("div",{className:"w-full flex justify-center",children:(0,l.jsx)("div",{className:"text-2xl color-black items-center justify-items-center text-align-center  min-h-screen mt-5 p-5 overflow-hidden font-vt323 w-[80%]",children:(0,l.jsx)("span",{className:"font-extrabold mb-3",children:"REFRESHING"})})});if(s)return(0,l.jsxs)("div",{children:["Error: ",s.message]});function u(e){let{props:r}=e;return null===t?(0,l.jsx)("span",{}):t.files.map((e,t)=>!e.mimeType.includes("image")||Number(e.size)/1024/1024>30||r(t)?(0,l.jsx)("span",{},e.id):(0,l.jsx)(v,{id:e.id,timestamp:e.createdTime,sharer:e.sharer,pfpData:i},e.id))}return(0,l.jsx)("div",{className:"bg-[#F4AAFF] p-[2%]",children:(0,l.jsxs)("div",{className:"flex flex-row gap-4 ",children:[(0,l.jsx)("div",{className:"w-1/2 min-w-[200px] aspect-auto",children:(0,l.jsx)(u,{props:e=>e%2==0})}),(0,l.jsx)("div",{className:"w-1/2 min-w-[200px] aspect-auto",children:(0,l.jsx)(u,{props:e=>e%2==1})})]})})}function v(e){let[t,r]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"relative m-2 p-2 bg-[#E4DDB6] rounded-md",children:[(0,l.jsx)(s.default,{src:d+e.id,alt:"",width:550,height:0,quality:10,loading:"lazy",className:"w-full h-auto rounded-lg",priority:!1,blurDataURL:d+h,placeholder:"blur",onLoadingComplete:()=>r(!0)},e.id),t?(0,l.jsxs)("div",{className:"flex items-center space-x-4 w-full mt-2",children:[(0,l.jsx)("div",{className:"w-[10%] flex justify-start",children:(0,l.jsx)("div",{className:"w-full h-auto rounded-full object-cover bg-white p-1 border border-black border-2",children:(0,l.jsx)(s.default,{className:"w-full h-auto rounded-full object-cover",src:function(){if("files"in e.pfpData){var t,r;let l=e.pfpData.files,s=(t=0,r=l.length-1,t=Math.ceil(t),Math.floor(Math.random()*((r=Math.floor(r))-t+1))+t);return c+l[s].id}return d+u}(),alt:"",quality:30,width:50,height:50,placeholder:"blur",blurDataURL:c+u})})}),(0,l.jsx)("h3",{className:"color-black text-md flex-grow overflow-x-hidden kaushan-script-regular lower-case",children:e.sharer.replaceAll(" ","_")}),(0,l.jsx)("div",{className:"w-12 h-12 max-w-[200px] aspect-auto"}),(0,l.jsx)("div",{className:"w-[20%] flex justify-end",children:(0,l.jsx)(s.default,{src:d+"1QfW0zFtwz5poV3X_nBq9zYdKwZHpKoWm",width:135,height:27,className:"w-full h-auto",alt:""})})]}):(0,l.jsx)("span",{className:"color-black",children:"blah blah blah.."})]})}function w(e){let[t,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[n,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=(0,o.getCookie)("gdrivefolderlink");e&&r(e.toString());let t=(0,o.getCookie)("gdriveapikey");t&&i(t.toString())},[]);let h=async r=>{r.preventDefault();let l=t.replace(RegExp("^https://drive.google.com/drive/folders/"),"").replaceAll("?usp=sharing","");d("");let a=await fetch(x(l),{method:"GET",headers:{"Content-Type":"application/json","X-Goog-Api-Key":s}});if(!a.ok)throw u("failed to get gdrive folder: ".concat(a.status,"\n\n")+JSON.stringify(a.json())),Error("HTTP error! status: ".concat(a.status));if(200!=a.status)return void u("failed to validate gdrive folder: "+JSON.stringify(a.json()));let i=await a.json();if("application/vnd.google-apps.folder"!==i.mimeType.toString())return void u("Google Drive ID is not a valid folder: gdrive object does not have mimeType:'application/vnd.google-apps.folder'");e.setFolderName(i.name),(0,o.setCookie)("gdrivefolderlink",l,{maxAge:31536e3,path:"/",secure:!0,sameSite:"strict"}),(0,o.setCookie)("gdriveapikey",s,{maxAge:31536e3,path:"/",secure:!0,sameSite:"strict"}),e.setFolderID(l),e.setAPIKey(s)};return(0,l.jsx)("div",{className:"font-ibm",children:(0,l.jsxs)("div",{className:"max-w-md w-full space-y-8 ",children:[(0,l.jsx)("div",{children:(0,l.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Enter Google-Drive Folder Details"})}),n&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,l.jsx)("span",{className:"block sm:inline",children:n})}),(0,l.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h,children:[(0,l.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"FolderID-address",className:"sr-only",children:"G-Drive Shared Folder Link"}),(0,l.jsx)("input",{id:"FolderID-address",name:"FolderID",type:"FolderID",autoComplete:"FolderID",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-white-500 placeholder-[#DEDEDE]-500 text-white-900 rounded-t-md focus:outline-none focus:ring-pink-500 focus:border-pink-700 focus:z-10 1xl:text-2xl",placeholder:"Google Drive Shared Folder Link",value:t,onChange:e=>r(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"apiKey",className:"sr-only",children:"Google API Key"}),(0,l.jsx)("input",{id:"apiKey",name:"apiKey",type:"password",autoComplete:"current-apiKey",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 mt-3 border border-white-500 placeholder-[#DEDEDE]-500 text-white-900 rounded-b-md focus:outline-none focus:ring-pink-500 focus:border-pink-700 focus:z-10 1xl:text-2xl",placeholder:"Google API Key",value:s,onChange:e=>{i(e.target.value)}})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-black bg-[#CAF1FF] hover:bg-white-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Let's Go!"})})]}),c?(0,l.jsx)("div",{className:"w-full bg-[#dedede] p-2 rounded-md",children:(0,l.jsx)("code",{className:"text-red-500",children:c})}):(0,l.jsx)("span",{})]})})}function j(){let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1),[x,v]=(0,a.useState)(!1),[j,b]=(0,a.useState)(2),N=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=setInterval(()=>{x&&null!=N&&N.current&&(N.current&&(N.current.scrollTop+=j),N.current.scrollHeight-N.current.scrollTop<N.current.clientHeight+1&&(N.current.scrollTop=0,p(e=>!e)))},20);return()=>clearInterval(e)},[x,j]),(0,l.jsx)("div",{className:"items-center justify-items-center min-h-screen pt-20 gap-12 sm:px-5 bg-[#498679] font-ibm",children:""==i||""==e?(0,l.jsx)(w,{setAPIKey:e=>d(e),setFolderID:e=>t(e),setFolderName:e=>o(e)}):(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsxs)("div",{className:"h-[85vh] w-[20vw] flex flex-col my-2",children:[(0,l.jsx)("div",{className:"flex w-full",children:(0,l.jsxs)("div",{className:"w-[30%] flex flex-col justify-center item-center cursor-pointer m-3",onClick:()=>{d(""),t("")},children:[(0,l.jsx)(s.default,{className:"w-70% h-auto object-cover",src:c+"1WnRBfqTc2L3EbWyrgPoYqeoDo6I65AJ3",alt:"",quality:80,width:100,height:100,placeholder:"blur",blurDataURL:c+h}),(0,l.jsx)("span",{className:"bg-[#000000]/50 rounded-lg px-2 py-1 text-xs w-full text-center mt-1",children:"eject"})]})}),(0,l.jsx)("div",{className:"flex-grow"}),(0,l.jsx)(n,{url:"https://drive.google.com/drive/folders/".concat(e,"?usp=sharing"),name:r,fgColor:"#498679",bgColor:"#FFFFFF"})]}),(0,l.jsxs)("div",{className:"h-[85vh] w-[75vw] flex flex-col overflow-hidden cursor-pointer",onClick:()=>v(e=>!e),children:[(0,l.jsx)("div",{className:"relative p-[-1] w-full",children:(0,l.jsx)(m,{})}),(0,l.jsx)("div",{className:"flex-1 scrollbar-track-custom overflow-y-auto mx-0.5 px-0.55 bg-[#F4C8FF] scroll-smooth [&::-webkit-scrollbar-thumb]:border [&::-webkit-scrollbar-thumb]:border-white",ref:N,children:(0,l.jsx)(g,{picsLoadedSetter:e=>setTimeout(()=>{v(e)},5e3),apiKey:i,scrollFolderID:e})},u?"terrible":"refresh mech"),(0,l.jsx)("div",{className:"p-[-1]",children:(0,l.jsx)(f,{})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[626,441,684,358],()=>t(3984)),_N_E=e.O()}]);